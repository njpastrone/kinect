# Kinect Self-Hosted Environment Configuration
# Copy this file to .env and update with your settings

# ==============================================
# CORE SETTINGS
# ==============================================

# Environment
NODE_ENV=production
LOG_LEVEL=info

# Network Ports
FRONTEND_PORT=3000
BACKEND_PORT=3001

# Bind address (0.0.0.0 for network access, 127.0.0.1 for localhost only)
BIND_ADDRESS=0.0.0.0

# ==============================================
# SECURITY
# ==============================================

# JWT Secrets (Generate with: openssl rand -base64 32)
JWT_SECRET=change-this-to-random-secret
JWT_REFRESH_SECRET=change-this-to-another-random-secret
JWT_EXPIRE=7d
JWT_REFRESH_EXPIRE=30d

# Session Secret
SESSION_SECRET=change-this-session-secret

# Data Encryption (Generate with: openssl rand -base64 32)
DATA_ENCRYPTION_KEY=change-this-encryption-key
ENABLE_ENCRYPTION=true

# ==============================================
# DATABASE
# ==============================================

# MongoDB Connection
MONGODB_URI=mongodb://mongodb:27017/kinect
MONGODB_DATABASE=kinect

# Database Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# ==============================================
# FEATURES
# ==============================================

# User Management
ALLOW_REGISTRATION=true
MAX_USERS=100
DEFAULT_USER_ROLE=user

# Import/Export
MAX_IMPORT_SIZE=50MB
ALLOWED_IMPORT_FORMATS=csv,vcf,json
ENABLE_AUTO_IMPORT=false

# Notifications
ENABLE_DESKTOP_NOTIFICATIONS=true
NOTIFICATION_CHECK_INTERVAL=3600000  # 1 hour in ms
DEFAULT_REMINDER_INTERVALS=30,90,180  # Days

# Privacy
ENABLE_TELEMETRY=false
ENABLE_ANALYTICS=false
ENABLE_ERROR_REPORTING=false
DATA_RETENTION_DAYS=365

# ==============================================
# PATHS (Docker Volumes)
# ==============================================

CONFIG_PATH=./config
IMPORT_PATH=./imports
EXPORT_PATH=./exports
BACKUP_PATH=./backups
LOG_PATH=./logs

# ==============================================
# OPTIONAL SERVICES
# ==============================================

# Redis Cache (Optional, for performance)
ENABLE_REDIS=false
REDIS_URL=redis://redis:6379

# Email Notifications (Optional, local SMTP)
ENABLE_EMAIL=false
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@kinect.local

# ==============================================
# SELF-HOSTED SPECIFIC
# ==============================================

# Indicate this is a self-hosted instance
SELF_HOSTED=true

# Local network settings
CORS_ORIGIN=http://localhost:3000,http://kinect.local
TRUSTED_PROXIES=loopback

# Auto-update (using Watchtower)
ENABLE_AUTO_UPDATE=false
UPDATE_SCHEDULE=0 0 3 * * *  # Daily at 3 AM

# Health checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30s

# ==============================================
# COMPANION APP SYNC (Optional)
# ==============================================

# Enable companion app sync over local network
ENABLE_COMPANION_SYNC=false
COMPANION_SYNC_PORT=3002
COMPANION_SYNC_KEY=generate-random-key

# ==============================================
# ADVANCED
# ==============================================

# Node.js Options
NODE_OPTIONS=--max-old-space-size=2048

# MongoDB Options
MONGODB_OPTIONS=--quiet

# Nginx Options
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# Debug Mode (Set to true for verbose logging)
DEBUG=false